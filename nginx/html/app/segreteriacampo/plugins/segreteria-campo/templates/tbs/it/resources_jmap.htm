<br/>


<style>
#map_canvas {
	height: 400px;
}
</style>

<div class="row">
	<h3><span class="glyphicon glyphicon-map-marker"></span> MAPPA SERVIZI</h3>
</div>
<div class="row">	
	<div class="col-md-3">
		<div class="panel panel-default">
			<div class="panel-body">
			[res2;block=begin]
				<h4>
					[res2.lettera]. [res2.nome]
				</h4>
				<h5>
					[res2.descrizione]
				</h5>
				<div class="form-horizontal">
					<div class="form-group">
						<label class="control-label col-md-4">Volontari</label>
						<div class="col-md-8 form-control-static">
							[res2.tot]
						</div>
						<label class="control-label col-md-4">Mezzi</label>
						<div class="col-md-8 form-control-static">
							[res2.tot2]
						</div>
					</div>
				</div>
				[res2;block=end] 
			</div>
		</div>
	</div>
	<div class="col-md-9">
		<div class="panel panel-default">
			<!--<div class="panel-body">-->
				<div id="map_canvas"></div>
				<!--<div id="world-map-markers" style="width: 720px; height: 400px"></div>-->
			<!--</div>-->
		</div>
	</div>
</div>

<link rel="stylesheet" media="all" href="../../lib/jquery-jvectormap/jquery-jvectormap-2.0.3.css"/>
<script src="../../lib/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js"></script>
<script src="../../lib/jquery-jvectormap/maps/jquery-jvectormap-it-mill.js"></script>

    <script>
      function initMap(){
	  var markers = Array();
	  	[res;block=begin]
			markers.push({latLng: [[res.latitudine], [res.longitudine]], name: '[res.lettera]'});		
		[res;block=end]
			
        $('#map_canvas').vectorMap({
          map: 'it_mill',
          scaleColors: ['#C8EEFF', '#0071A4'],
          normalizeFunction: 'polynomial',
          hoverOpacity: 0.7,
          hoverColor: false,
          markerStyle: {
            initial: {
              fill: '#F8E23B',
              stroke: '#383f47'
            }
          },
          backgroundColor: '#383f47',
          markers: markers,
		  zoomMax:99,
		  focusOn: {lat: markers[0].latLng[0],lng: markers[0].latLng[1], x: 1, y: 1, scale: 5},
		  labels: {
        markers: {
          render: function(index){
            return markers[index].name;
          }
        }
    }
      });
	  
	  }
	  
	  $( document ).ready(initMap());
    </script>